mysql57

mkdir -p /data/mysql57/{conf,data,log}
vi $PWD/mysql57/conf/my.cnf

[mysqld]
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
datadir         = /var/lib/mysql
# log-error      = /var/log/mysql/error.log
# By default we only accept connections from localhost
# bind-address   = 127.0.0.1
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
character_set_server=utf8mb4
init_connect='SET NAMES utf8mb4'
max_allowed_packet = 20M
skip-name-resolve
# mysql8新特性
secure-file-priv=NULL
character-set-server=utf8mb4
collation-server=utf8mb4_bin

[mysql]
default-character-set = utf8mb4

[mysql.server]
default-character-set = utf8mb4

[mysqld_safe]
default-character-set = utf8mb4

[client]
default-character-set = utf8mb4

docker run --name mysql57 \
    --restart always \
    --privileged=true \
    -p 3306:3306 \
    -v $PWD/mysql57/log:/var/log/mysql \
    -v $PWD/mysql57/conf/my.cnf:/etc/mysql/my.cnf \
    -v $PWD/mysql57/data:/var/lib/mysql \
    -e MYSQL_ROOT_PASSWORD="root" \
    -e MYSQL_USER="root" \
    -e MYSQL_PASSWORD="root" \
    -d mysql:5.7.31



mysql8

mkdir -p /data/mysql8/{conf,data,log}
vi $PWD/mysql8/conf/my.cnf

[mysqld]
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
datadir         = /var/lib/mysql
# log-error      = /var/log/mysql/error.log
# By default we only accept connections from localhost
# bind-address   = 127.0.0.1
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
character_set_server=utf8mb4
init_connect='SET NAMES utf8mb4'
max_allowed_packet = 20M
skip-name-resolve
# mysql8新特性
secure-file-priv=NULL
character-set-server=utf8mb4
collation-server=utf8mb4_bin

[mysql]
default-character-set = utf8mb4

[mysql.server]
default-character-set = utf8mb4

[mysqld_safe]
default-character-set = utf8mb4

[client]
default-character-set = utf8mb4

docker run --name mysql8 \
    --restart always \
    --privileged=true \
    -p 3308:3306 \
    -v $PWD/mysql8/log:/var/log/mysql \
    -v $PWD/mysql8/conf/my.cnf:/etc/mysql/my.cnf \
    -v $PWD/mysql8/data:/var/lib/mysql \
    -e MYSQL_ROOT_PASSWORD="root" \
    -e MYSQL_PASSWORD="root" \
    -d mysql:8.0

mysql8需要配置root用户可远程访问
docker exec -it mysql8 bash
mysql -uroot -proot
use mysql;
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';
flush privileges;

